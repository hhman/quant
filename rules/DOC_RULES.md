# 文档编写规则（强制）

本规则用于约束 Agent 在撰写文档、设计说明、分析报告时的输出行为。

文档用于表达 **结构、职责与决策**，
而不是展示实现细节。

---

## 一、核心原则

### 1. 文档不承载实现

文档中 **严禁** 出现：

- 完整代码实现
- 可直接运行的代码片段
- 函数体
- class 方法实现

文档不是 README 教程，也不是 notebook。

---

### 2. 描述优先于展示

文档必须：
- 使用自然语言描述设计
- 使用结构化条目表达逻辑
- 使用抽象概念而非实现细节

如果必须靠代码才能说明清楚：
→ 说明该内容不应出现在文档中。

---

## 二、代码相关内容的严格限制

### 3. 唯一允许的代码形式（最小表达）

仅在无法避免时，最多允许出现：

- 函数签名（无函数体）
- 类名 + 职责说明
- 不可运行的伪代码

示例（允许）：
- `def compute_factor(series) -> pd.Series`
- `class FactorExecutor: 负责因子执行，不负责数据读取`

示例（禁止）：
- 完整函数实现
- 连续贴多个函数
- 带逻辑分支的代码块

---

### 4. 禁止"堆代码解释设计"

严禁：
- 用代码代替文字说明
- 为了直观而贴实现
- 用代码展示执行流程

文档不追求"看起来清楚"，
而追求"结构上清楚"。

---

## 三、文档应关注的内容

### 5. 文档应重点描述

文档应优先描述：

- 模块职责边界
- 设计决策的原因
- 模块之间的关系
- 明确哪些事情不做

而不是：
- 每一步怎么实现
- 每一行代码在干什么

---

### 6. 设计讨论的正确形式

允许：
- 描述被否决方案的"思想"
- 对不同方案做概念级比较

禁止：
- 粘贴被否决方案的实现代码
- 在文档中保留历史实现细节

---

## 四、表达风格约束

### 7. 禁止教程式与过程式写法

文档中禁止：

- Step 1 / Step 2 的执行步骤
- 面向初学者的教学语气
- "首先我们……"叙述方式

文档假设读者是专业工程师。

---

### 8. 精简与可删除性

- 每一节都应可独立删除
- 避免大段流水账
- 使用列表和结构优先于长段文字

---

## 五、Agent 输出约束

### 9. 文档类请求的默认行为

当用户请求：
- 架构分析
- 重构建议
- 设计说明
- 规范制定

Agent 必须：
1. 只输出文字描述
2. 如需提及代码，仅限签名级别
3. 主动避免实现细节

---

## 六、最终裁决

如用户明确要求提供实现代码：
- 本规则可被暂时忽略

否则：
- 本规则具有强制约束力
